 
    <div class="welcome">
          <video id="video" width="640" height="480" autoplay></video>
          <button id="snap" >Snap Photo</button>
          <button id="test" >Snap Photo</button>
          <canvas id="canvas" width="640" height="480"></canvas>
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.3.4/vconsole.min.js"></script>
    <script>
      var vConsole = new VConsole();
    </script>
	
  
  <script> 
              var canvas = document.getElementById("canvas"),
                  context = canvas.getContext("2d"), 
                  video = document.getElementById("video"),
                  videoObj = { "video": true, "audio": false },
                  errBack = function(error) { console.log("Video capture error: ", error); };
   
              var test = function(){
                    if (navigator.getUserMedia) { 
                    navigator.getUserMedia(videoObj, function(stream) {
                        video.src = stream; video.play();
                    }, errBack);
                   } else if (navigator.webkitGetUserMedia) { // WebKit-prefixed  根据不同的浏览器写法不同
                    navigator.webkitGetUserMedia(videoObj, function(stream) {
                        video.src = window.webkitURL.createObjectURL(stream);video.play();
                    }, errBack);
                   } else if (navigator.mozGetUserMedia) { // Firefox-prefixed
                    navigator.mozGetUserMedia(videoObj, function(stream) {
                        video.src = window.URL.createObjectURL(stream); video.play();
                    }, errBack);
                  } 
              }    
              document.getElementById("snap").addEventListener("click", function() {
                  context.drawImage(video, 0, 0, 640, 480);
              });


              document.getElementById("test").addEventListener("click", function() {
                  test()
              });
	  function onPlusReady() {
              console.log("onPlusReady()",plus)
	      // 创建扫码控件来调获取手机的相机权限
	      barcode = plus.barcode.create('barcode', [plus.barcode.QR], {
		top: '100px', //改为-9999px隐藏该页面
		left: '0',
		width: '100%',
		height: '500px',
		position: 'static'
	      });
	      plus.webview.currentWebview().append(barcode);;
	      //barcode.start();开始扫码识别（我们把这句代码注释了，因为我们不需要扫描任何东西）
	  }
	      document.addEventListener("plusready", onPlusReady, false);
        
  </script>
   
