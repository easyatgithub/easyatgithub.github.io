(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-center-addLink"],{4291:function(t,e,i){"use strict";i.r(e);var n=i("da97"),a=i("9528");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);var l,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"23140272",null,!1,n["a"],l);e["default"]=u.exports},6137:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("238e")),o={data:function(){return{opearte:"保存",linkState:"new",user:{},item:{link:"",title:"",collect:0,state:1,desc:"",username:""}}},onLoad:function(t){var e=getApp().globalData.linkState;this.linkState=e;getApp().globalData.user;if(console.log("链接页面 加载时 传入参数",t),t.state){var i=JSON.parse(t.item);this.item=i,"已分享"===t.state?this.opearte="更新":"已收藏"===t.state?this.opearte="取消收藏":this.opearte="保存"}},mounted:function(){},created:function(){},onShow:function(){this.init()},methods:{init:function(){var t=this,e=getApp().globalData.user;e?t.user=e:uni.getStorage({key:"user",success:function(e){t.user=e.data},fail:function(t){console.log("getStorage",t)}})},dealLink:function(){console.log("goSaveLink",this.item),this.item.username=this.user.username,this.nullKey(this.user)?uni.showToast({title:"请先登陆",icon:"none"}):this.nullKey(this.item)||("保存"==this.opearte?this.doSaveLink():"更新"==this.opearte?this.doUpdateLink():(console.log("取消收藏bug 在哪里",this.opearte,this.item),this.doCancleCollect()))},doCancleCollect:function(){var t=this;a.default.doCancleCollect("collect",this.item).then(function(e){console.log("doCancleCollect",e),a.default.selectLinkById(t.item.linkID).then(function(e){var i={collect:e.attributes.collect-1};a.default.updateObj("links",t.item.linkID,i).then(function(t){uni.showToast({title:"已取消收藏",icon:"none"})})})},function(t){console.log(t)})},doUpdateLink:function(){var t=this.item.objectId;delete this.item["objectId"],delete this.item["createdAt"],delete this.item["updatedAt"],a.default.updateObj("links",t,this.item).then(function(t){uni.showToast({title:"更新成功",icon:"none"})},function(t){console.log(t)})},doSaveLink:function(){a.default.doSaveLink(this.item).then(function(t){console.log("signUp",t),uni.showToast({title:"添加成功",icon:"none"})},function(t){console.log(t),uni.showToast({title:"失败"+t,icon:"none"})})},doDeleteLink:function(){console.log("删除对象",this.item),a.default.doDeleteLink(this.item.objectId),uni.showToast({title:"删除成功",icon:"none"}),uni.navigateBack()},bindTextAreaBlur:function(t){}}};e.default=o},9528:function(t,e,i){"use strict";i.r(e);var n=i("6137"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},da97:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"center"},[i("v-uni-view",{staticClass:"center-list"},[i("v-uni-form",{staticClass:"loginView"},[i("v-uni-view",{staticClass:"input-view"},[i("v-uni-view",{staticClass:"label-view"},[i("v-uni-text",{staticClass:"label"},[t._v("链接")])],1),i("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入链接",name:"nameValue"},model:{value:t.item.link,callback:function(e){t.$set(t.item,"link",e)},expression:"item.link"}})],1),i("v-uni-view",{staticClass:"input-view"},[i("v-uni-view",{staticClass:"label-view"},[i("v-uni-text",{staticClass:"label"},[t._v("标题")])],1),i("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入标题",name:"nameValue"},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}})],1),i("v-uni-view",{staticClass:"input-view"},[i("v-uni-view",{staticClass:"label-view"},[i("v-uni-text",{staticClass:"label"},[t._v("描述")])],1),i("v-uni-textarea",{attrs:{"placeholder-style":"color:#F76260",placeholder:"简单描述一下",rows:"10"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTextAreaBlur.apply(void 0,arguments)}},model:{value:t.item.desc,callback:function(e){t.$set(t.item,"desc",e)},expression:"item.desc"}})],1),i("v-uni-view",{staticClass:"button-view"},[i("v-uni-button",{staticClass:"login",attrs:{type:"default","hover-class":"hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dealLink.apply(void 0,arguments)}}},[t._v(t._s(t.opearte))])],1),i("v-uni-view",{staticClass:"button-view"},["更新"==t.opearte?i("p",[i("v-uni-button",{attrs:{type:"default","hover-class":"hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doDeleteLink.apply(void 0,arguments)}}},[t._v("删除")])],1):t._e()])],1)],1)],1)},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})}}]);